<!-- prettier-ignore -->
<template>
  <div class="svg">
    <svg
      id="UnitCircle"
      data-name="Layer 1"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 355.38 356.37"
    >
      
        <!-- Unit Circle Below ... -->
        <line class="cls-1" x1="0.4" y1="185.89" x2="336.97" y2="185.89" />
        <path d="M354.41,191.69a14.38,14.38,0,0,1-4-1.5v3a14.66,14.66,0,0,1,4-1.49" transform="translate(-13.85 -5.8)" />
        <rect class="cls-2" x="340.76" y="179.48" width="14.62" height="12.82" />
        <path
            d="M364.71,188.94a.72.72,0,0,0-.63.7.44.44,0,0,0,.47.46.75.75,0,0,0,.73-.76c0-.6-.69-.88-1.29-.88a1.83,1.83,0,0,0-1.49,1.14,1.49,1.49,0,0,0-1.48-1.14c-1.47,0-2.24,1.89-2.24,2.2a.14.14,0,0,0,.15.13c.12,0,.15-.08.18-.14.49-1.6,1.45-1.9,1.87-1.9.64,0,.77.6.77.95a6.16,6.16,0,0,1-.26,1.34l-.49,2c-.21.86-.63,1.65-1.39,1.65a1.42,1.42,0,0,1-.73-.19.75.75,0,0,0,.63-.7.45.45,0,0,0-.49-.46.75.75,0,0,0-.72.76c0,.6.68.87,1.3.87a1.77,1.77,0,0,0,1.47-1.13,1.5,1.5,0,0,0,1.48,1.13c1.47,0,2.25-1.88,2.25-2.19a.13.13,0,0,0-.15-.13c-.13,0-.14.07-.18.18-.39,1.27-1.23,1.86-1.87,1.86s-.78-.38-.78-1a6.63,6.63,0,0,1,.29-1.49l.5-1.95c.22-.87.71-1.5,1.37-1.5a1.53,1.53,0,0,1,.73.19"
            transform="translate(-13.85 -5.8)" />
        <line class="cls-1" x1="170.48" y1="355.97" x2="170.48" y2="19.39" />
        <path d="M184.33,21.61a14.33,14.33,0,0,1-1.5,4h3a14,14,0,0,1-1.49-4" transform="translate(-13.85 -5.8)" />
        <rect class="cls-2" x="163.48" width="14.01" height="15.61" />
        <path
            d="M184.38,16.91a2.12,2.12,0,0,1-1.65,1,1.07,1.07,0,0,1-1.08-.69.36.36,0,0,0,.14,0,.73.73,0,0,0,.72-.71.44.44,0,0,0-.49-.44.78.78,0,0,0-.73.88,1.3,1.3,0,0,0,1.44,1.23A3.79,3.79,0,0,0,186,15.31l1.4-5.6a.93.93,0,0,0,.05-.24.37.37,0,0,0-.39-.36.58.58,0,0,0-.55.49l-1.06,4.22a.94.94,0,0,1-.19.45,1.85,1.85,0,0,1-1.45.89c-.8,0-.87-.79-.87-1.18a9.62,9.62,0,0,1,.77-3,2.46,2.46,0,0,0,.25-.91A1.12,1.12,0,0,0,182.84,9c-1.32,0-1.85,2.09-1.85,2.2a.14.14,0,0,0,.15.13c.13,0,.15-.06.21-.26.34-1.2.89-1.78,1.45-1.78.13,0,.37,0,.37.48a4,4,0,0,1-.37,1.33,7.12,7.12,0,0,0-.71,2.7,1.55,1.55,0,0,0,1.7,1.68,1.9,1.9,0,0,0,1.43-.66l0,0a5.54,5.54,0,0,1-.86,2.11"
            transform="translate(-13.85 -5.8)" />
        <circle class="cls-3" cx="184.33" cy="191.69" r="113.39" transform="translate(-95.4 180.68) rotate(-45)" />
        <line class="cls-4" x1="113.79" y1="183.89" x2="113.79" y2="187.88" />
        <path d="M122.57,202.1c.24,0,.5,0,.5-.29s-.26-.29-.5-.29h-7.78c-.24,0-.5,0-.5.29s.26.29.5.29h7.78"
            transform="translate(-13.85 -5.8)" />
        <path
            d="M127.71,205.41c-.47,0-1.4-.25-1.67-1.82a17.46,17.46,0,0,1-.16-3,12.58,12.58,0,0,1,.23-3.09,1.72,1.72,0,0,1,1.6-1.41,1.75,1.75,0,0,1,1.65,1.57,15.17,15.17,0,0,1,.18,2.93,18.67,18.67,0,0,1-.15,2.93c-.28,1.58-1.18,1.85-1.68,1.85m2.93-4.61a8,8,0,0,0-.59-3.45,2.57,2.57,0,0,0-4.72.11,7.62,7.62,0,0,0-.54,3.34,7.24,7.24,0,0,0,.62,3.47,2.57,2.57,0,0,0,4.68-.15A8,8,0,0,0,130.64,200.8Z"
            transform="translate(-13.85 -5.8)" />
        <path d="M133.94,204.71a.7.7,0,1,0-.7.69.69.69,0,0,0,.7-.69" transform="translate(-13.85 -5.8)" />
        <path
            d="M137,197.17a4.23,4.23,0,0,0,1.28.21A3.06,3.06,0,0,0,141,196c0-.06,0-.13-.11-.13a.41.41,0,0,0-.19.06,4.67,4.67,0,0,1-3.76,0,.33.33,0,0,0-.14,0c-.12,0-.12.09-.12.32v4.26c0,.26,0,.35.17.35s.09,0,.23-.19a2.18,2.18,0,0,1,1.8-.93,1.48,1.48,0,0,1,1.25,1,4.76,4.76,0,0,1,.26,1.81,3.83,3.83,0,0,1-.4,2,1.79,1.79,0,0,1-1.51.87,2.21,2.21,0,0,1-2.14-1.69.59.59,0,0,0,.23,0,.63.63,0,0,0,0-1.26.61.61,0,0,0-.64.69,2.62,2.62,0,0,0,2.57,2.61,3.11,3.11,0,0,0,3.05-3.19,2.91,2.91,0,0,0-2.66-3.13,2.47,2.47,0,0,0-1.82.76v-3"
            transform="translate(-13.85 -5.8)" />
        <line class="cls-4" x1="227.17" y1="183.89" x2="227.17" y2="187.88" />
        <path
            d="M235.51,205c-.47,0-1.4-.25-1.67-1.82a17.46,17.46,0,0,1-.16-3,12.58,12.58,0,0,1,.23-3.09,1.72,1.72,0,0,1,1.6-1.41,1.75,1.75,0,0,1,1.65,1.57,15.17,15.17,0,0,1,.18,2.93,18.67,18.67,0,0,1-.15,2.93c-.28,1.58-1.18,1.85-1.68,1.85m2.93-4.61a7.91,7.91,0,0,0-.59-3.44,2.57,2.57,0,0,0-4.72.1,7.62,7.62,0,0,0-.54,3.34,7.24,7.24,0,0,0,.62,3.47,2.57,2.57,0,0,0,4.68-.15A8,8,0,0,0,238.44,200.4Z"
            transform="translate(-13.85 -5.8)" />
        <path d="M241.74,204.31a.7.7,0,1,0-.7.69.69.69,0,0,0,.7-.69" transform="translate(-13.85 -5.8)" />
        <path
            d="M244.84,196.77a4.23,4.23,0,0,0,1.28.21,3.06,3.06,0,0,0,2.65-1.39c0-.06,0-.13-.11-.13a.41.41,0,0,0-.19.06,4.67,4.67,0,0,1-3.76,0,.33.33,0,0,0-.14,0c-.12,0-.12.09-.12.32V200c0,.26,0,.35.17.35s.09,0,.23-.19a2.18,2.18,0,0,1,1.8-.93,1.48,1.48,0,0,1,1.25.95,4.76,4.76,0,0,1,.26,1.81,3.83,3.83,0,0,1-.4,2,1.81,1.81,0,0,1-1.51.87,2.21,2.21,0,0,1-2.14-1.69.59.59,0,0,0,.23,0,.63.63,0,1,0,0-1.26.61.61,0,0,0-.64.69,2.62,2.62,0,0,0,2.57,2.61,3.11,3.11,0,0,0,3-3.19,2.91,2.91,0,0,0-2.66-3.13,2.47,2.47,0,0,0-1.82.76v-3"
            transform="translate(-13.85 -5.8)" />
        <line class="cls-4" x1="68.43" y1="185.09" x2="68.43" y2="186.68" />
        <line class="cls-4" x1="79.77" y1="185.09" x2="79.77" y2="186.68" />
        <line class="cls-4" x1="91.11" y1="185.09" x2="91.11" y2="186.68" />
        <line class="cls-4" x1="102.45" y1="185.09" x2="102.45" y2="186.68" />
        <line class="cls-4" x1="125.13" y1="185.09" x2="125.13" y2="186.68" />
        <line class="cls-4" x1="136.46" y1="185.09" x2="136.46" y2="186.68" />
        <line class="cls-4" x1="147.8" y1="185.09" x2="147.8" y2="186.68" />
        <line class="cls-4" x1="159.14" y1="185.09" x2="159.14" y2="186.68" />
        <line class="cls-4" x1="272.53" y1="185.09" x2="272.53" y2="186.68" />
        <line class="cls-4" x1="261.19" y1="185.09" x2="261.19" y2="186.68" />
        <line class="cls-4" x1="249.85" y1="185.09" x2="249.85" y2="186.68" />
        <line class="cls-4" x1="238.51" y1="185.09" x2="238.51" y2="186.68" />
        <line class="cls-4" x1="215.83" y1="185.09" x2="215.83" y2="186.68" />
        <line class="cls-4" x1="204.5" y1="185.09" x2="204.5" y2="186.68" />
        <line class="cls-4" x1="193.16" y1="185.09" x2="193.16" y2="186.68" />
        <line class="cls-4" x1="181.82" y1="185.09" x2="181.82" y2="186.68" />
        <line class="cls-4" x1="172.47" y1="242.58" x2="168.49" y2="242.58" />
        <path
            d="M190.8,252.41c-.46,0-1.39-.25-1.66-1.82a17.46,17.46,0,0,1-.16-3,12.58,12.58,0,0,1,.23-3.09,1.72,1.72,0,0,1,1.59-1.41,1.75,1.75,0,0,1,1.66,1.57,15.17,15.17,0,0,1,.18,2.93,18.67,18.67,0,0,1-.15,2.93c-.28,1.58-1.18,1.85-1.69,1.85m2.94-4.61a8,8,0,0,0-.59-3.45,2.57,2.57,0,0,0-4.72.11,7.62,7.62,0,0,0-.54,3.34,7.24,7.24,0,0,0,.62,3.47,2.55,2.55,0,0,0,2.29,1.43,2.57,2.57,0,0,0,2.39-1.58A8,8,0,0,0,193.74,247.8Z"
            transform="translate(-13.85 -5.8)" />
        <path d="M196.94,251.71a.7.7,0,1,0-.7.69.69.69,0,0,0,.7-.69" transform="translate(-13.85 -5.8)" />
        <path
            d="M200,244.17a4.23,4.23,0,0,0,1.28.21A3.06,3.06,0,0,0,204,243c0-.06,0-.13-.11-.13a.41.41,0,0,0-.19.06,4.67,4.67,0,0,1-3.76,0,.33.33,0,0,0-.14,0c-.12,0-.12.09-.12.32v4.26c0,.26,0,.35.17.35s.09,0,.23-.19a2.16,2.16,0,0,1,1.8-.93,1.48,1.48,0,0,1,1.25,1,4.76,4.76,0,0,1,.26,1.81,3.75,3.75,0,0,1-.41,2,1.76,1.76,0,0,1-1.5.87,2.21,2.21,0,0,1-2.14-1.69.59.59,0,0,0,.23,0,.63.63,0,0,0,0-1.26.61.61,0,0,0-.64.69,2.62,2.62,0,0,0,2.57,2.61,3.11,3.11,0,0,0,3.05-3.19,2.91,2.91,0,0,0-2.66-3.13,2.47,2.47,0,0,0-1.82.76v-3"
            transform="translate(-13.85 -5.8)" />
        <line class="cls-4" x1="172.47" y1="129.19" x2="168.49" y2="129.19" />
        <path
            d="M191.2,139.61c-.46,0-1.39-.25-1.66-1.82a17.46,17.46,0,0,1-.16-3,12.58,12.58,0,0,1,.23-3.09,1.72,1.72,0,0,1,1.59-1.41,1.75,1.75,0,0,1,1.66,1.57,15.17,15.17,0,0,1,.18,2.93,18.67,18.67,0,0,1-.15,2.93c-.28,1.58-1.18,1.85-1.69,1.85m2.94-4.61a8,8,0,0,0-.59-3.45,2.57,2.57,0,0,0-4.72.11,7.62,7.62,0,0,0-.54,3.34,7.24,7.24,0,0,0,.62,3.47,2.55,2.55,0,0,0,2.29,1.43,2.57,2.57,0,0,0,2.39-1.58A8,8,0,0,0,194.14,135Z"
            transform="translate(-13.85 -5.8)" />
        <path d="M197.34,138.91a.7.7,0,1,0-.7.69.69.69,0,0,0,.7-.69" transform="translate(-13.85 -5.8)" />
        <path
            d="M200.44,131.37a4.23,4.23,0,0,0,1.28.21,3.09,3.09,0,0,0,2.66-1.39.12.12,0,0,0-.12-.13.41.41,0,0,0-.19.06,4.79,4.79,0,0,1-1.86.39,4.59,4.59,0,0,1-1.9-.41.39.39,0,0,0-.14,0c-.12,0-.12.09-.12.32v4.26c0,.26,0,.35.17.35s.09,0,.23-.19a2.16,2.16,0,0,1,1.8-.93,1.48,1.48,0,0,1,1.25.95,4.76,4.76,0,0,1,.26,1.81,3.75,3.75,0,0,1-.41,2,1.76,1.76,0,0,1-1.5.87,2.21,2.21,0,0,1-2.14-1.69.59.59,0,0,0,.23,0,.63.63,0,0,0,0-1.26.61.61,0,0,0-.64.69,2.62,2.62,0,0,0,2.58,2.61,3.11,3.11,0,0,0,3-3.19,2.91,2.91,0,0,0-2.66-3.13,2.47,2.47,0,0,0-1.82.76v-3"
            transform="translate(-13.85 -5.8)" />
        <line class="cls-4" x1="171.28" y1="287.94" x2="169.68" y2="287.94" />
        <line class="cls-4" x1="171.28" y1="276.6" x2="169.68" y2="276.6" />
        <line class="cls-4" x1="171.28" y1="265.26" x2="169.68" y2="265.26" />
        <line class="cls-4" x1="171.28" y1="253.92" x2="169.68" y2="253.92" />
        <line class="cls-4" x1="171.28" y1="231.24" x2="169.68" y2="231.24" />
        <line class="cls-4" x1="171.28" y1="219.9" x2="169.68" y2="219.9" />
        <line class="cls-4" x1="171.28" y1="208.56" x2="169.68" y2="208.56" />
        <line class="cls-4" x1="171.28" y1="197.23" x2="169.68" y2="197.23" />
        <line class="cls-4" x1="171.28" y1="83.84" x2="169.68" y2="83.84" />
        <line class="cls-4" x1="171.28" y1="95.18" x2="169.68" y2="95.18" />
        <line class="cls-4" x1="171.28" y1="106.52" x2="169.68" y2="106.52" />
        <line class="cls-4" x1="171.28" y1="117.85" x2="169.68" y2="117.85" />
        <line class="cls-4" x1="171.28" y1="140.53" x2="169.68" y2="140.53" />
        <line class="cls-4" x1="171.28" y1="151.87" x2="169.68" y2="151.87" />
        <line class="cls-4" x1="171.28" y1="163.21" x2="169.68" y2="163.21" />
        <line class="cls-4" x1="171.28" y1="174.55" x2="169.68" y2="174.55" />      

      <!-- Cosine Dashed Line -->
      <circle :cx="_x" :cy="_y" class="point" r="2" />
      <line :x1="_x" :x2="_x" :y2="_y" class="horizontal cls-1" y1="185.89"/>
      <!--                        -->

      <!-- Sine Dashed Line -->
      <line :y1="_y" :x2="_x" :y2="_y" class="horizontal cls-1" x1="170.48"/>
      <!--                        -->

      <!-- Tangent Dashed Lines -->
      <line class="cls-1 tanVertical" x1="283.8738" y1="355.97" x2="283.8738" y2="19.39" />
      <line :x1="_x" :y1="_y" :y2="_tan" class="cls-1" x2="283.8738" />
      <circle :cy="_tan" class="point" cx="283.8738" r="2" />
      <line :y1="_tan"  :y2="_tan" class="horizontal cls-1" x1="170.48" x2="283.8738"/>
      <g>
        <rect :y="_tanLoc" x="293.8738" rx="5" ry="5" class="text" />
        <text :y="_tanLoc" x="293.8738" class="coor">
          (1, {{ _tanTxt }})
        </text>
      </g>
      <!--                      -->
      
      <!-- Angle -->
      <line :x2="_x" :y2="_y" class="cls-1 handle" x1="170.48" y1="185.89" />
      <circle :cx="_x" :cy="_y" class="point" r="2" />

      <g>
        <rect :x="_xTxtLoc" :y="_yTxtLoc - 10" rx="5" ry="5" class="text" />
        <text :x="_xTxtLoc" :y="_yTxtLoc" class="coor">
          ({{ _xText }}, {{ _yText }})
        </text>
      </g>
      <!--       -->
    </svg>
    <input v-model="angle" type="range" min="0" max="360" value="0" />
    <input v-model="angle" class="angleText" type="text" />
  </div>
</template>

<script>
// prettier-ignore
export default {
  data() {
    return {
      angle: '0'
    }
  },
  computed: {
    // Get X-Cor on unit circle
    _x() {
      const r = 113.3937
      const offset = 170.48
      const rads = (this.angle * Math.PI) / 180
      return r * Math.cos(rads) + offset
    },
    // Get Y-Cor on unit circle
    _y() {
      const r = 113.3937
      const offset = 185.89
      const rads = (this.angle * Math.PI) / 180
      return -r * Math.sin(rads) + offset // negative as positive y axis is down in canvas
    },
    _xTxtLoc() {
      const r = 113.3937
      const offset = 170.48
      const rads = (this.angle * Math.PI) / 180
      const sf = 1.05
      return sf * r * Math.cos(rads) + offset
    },
    _yTxtLoc() {
      const r = 113.3937
      const offset = 185.89
      const rads = (this.angle * Math.PI) / 180
      const sf = 1.05
      return -sf * r * Math.sin(rads) + offset // negative as positive y axis is down in canvas
    },
    _xText() {
      const rads = (this.angle * Math.PI) / 180
      const value = Math.cos(rads).toFixed(2)
      return value === '-0.00' ? '0.00' : value
    },
    _yText() {
      const rads = (this.angle * Math.PI) / 180
      const value = Math.sin(rads).toFixed(2)
      return value === '-0.00' ? '0.00' : value
    },
    _tan() {
      const r = 113.3937
      const offset = 185.89
      const rads = (this.angle * Math.PI) / 180
      return -r * Math.tan(rads) + offset
    },
    _tanTxt() {
      // computer big number limitations
      if (this.angle === '90' || this.angle === '270') return 'undef'
      
      const rads = (this.angle * Math.PI) / 180
      const value = Math.tan(rads).toFixed(2)
      return value === '-0.00' ? '0.00' : value
    },
    _tanLoc() {
      const r = 113.3937
      const offset = 185.89
      const rads = (this.angle * Math.PI) / 180
      const tan = -r * Math.tan(rads) + offset

      const radsUpper = (237 * Math.PI) / 180
      const tanUpper = -r * Math.tan(radsUpper) + offset

      const radsLower = (125 * Math.PI) / 180
      const tanLower = -r * Math.tan(radsLower) + offset

      if (tan <= tanUpper) {
        return tanUpper
      }
      else if (tan >= tanLower) {
        return tanLower
      }
      else {
        return tan
      }
    }
    
  },
  methods: {
    mapVal(value, start1, stop1, start2, stop2) {
      return start2 + (value - start1) * (stop2 - start2) / (stop1 - start1)
    }
  }
}
</script>

<style lang="stylus" scoped>
@import '~static/css/main.styl'

.svg
  width 100%

svg
  width: 100%

.cls-1
.cls-3
.cls-4
  fill none
  stroke #000
  stroke-linecap round
  stroke-miterlimit 10

.cls-1
  stroke-width 0.8px

.cls-2
  fill #fff

.cls-3
  stroke-width 0.8px

.cls-4
  stroke-width 0.4px

.point
  stroke #000
  fill #000

.handle
  stroke-width 1.5px

.coor
  background-color white
  border-radius 5px
  font-size 10pt

.text
  fill white
  z-index 1000
  width 70px
  padding 5px
  height 15px

.inputText
  font-size 1.3em
  color $navy

.wave
  stroke-dasharray 1000

.angleText
  text-align center
  width 50px

.angleText:focus
  outline none !important

.horizontal
  stroke '#de2f29'
  stroke-dasharray 10px
</style>
